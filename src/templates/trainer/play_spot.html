{% extends "base.html" %}
{% load static %}

{% block title %}Trainer{% endblock %}

{% block body %}

{{ hand.tree|json_script:"gameTree" }}
<script>const gameTree = JSON.parse(document.getElementById('gameTree').textContent);</script>

<p><script>document.write(JSON.stringify(gameTree))</script></p>

<div id="container">
    <div id="pokerTable">
        <table id="tableGrid">
            <tr class="stack">
                <td>H: <span id="heroStackValue">1000</span></td>
                <td class="dealer-button"></td>
                <td id="pot">Pot: <span id="potValue">800</span></td>
                <td class="dealer-button"></td>
                <td>V: <span id="vilainStackValue">800</span></td>
            </tr>
            <tr>
                <td id="heroCards">
                    {% include "utils/split_board.html" with board=hand.hero_hole only %}
                </td>
                <td class="dealer-button">
                    {% if not hand.hero_is_oop %}
                    <img class="dealer-button" src="{% static 'img/dealer.png' %}">
                    {% endif %}
                </td>
                <td id="board">
                    <img class="card" src="{% static 'img/cards/back.png' %}">
                    <img class="card" src="{% static 'img/cards/back.png' %}">
                    <img class="card" src="{% static 'img/cards/back.png' %}">
                    <img class="card" src="{% static 'img/cards/back.png' %}">
                    <img class="card" src="{% static 'img/cards/back.png' %}">
                </td>
                <td class="dealer-button">
                    {% if hand.hero_is_oop %}
                    <img class="dealer-button" src="{% static 'img/dealer.png' %}">
                    {% endif %}
                </td>
                <td id="vilainCards">
                    <img class="card" src="{% static 'img/cards/back.png' %}">
                    <img class="card" src="{% static 'img/cards/back.png' %}">
                </td>
            </tr>
        </table>
    </div>

    <div id="separator"></div>

    <div id="actionLog"></div>
</div>

<script>
    const actionLog = document.getElementById('actionLog');
    const consoleLog = [];

    function updateActionLog(value) {
        const newLog = `<p>${value}</p>`;
        consoleLog.push(newLog);
        actionLog.innerHTML = consoleLog.join('');
    }

    function popLastLog() {
        if (consoleLog.length > 0) {
            consoleLog.pop();
            actionLog.innerHTML = consoleLog.join('');
        }
    }
</script>

{% endblock %}
